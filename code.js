import React, { useState } from 'react';
import { Button } from "/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from "/components/ui/card";
import { Label } from "/components/ui/label";
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "/components/ui/select";
import { Sun, Droplets, Leaf, Bug, Languages, Sprout, Shield, Calendar, BarChart2, Clock, TrendingUp } from "lucide-react";

// Define translations
const translations = {
  en: {
    title: "ЁЯМ▒ Smart Crop Advisor",
    description: "Get personalized crop recommendations tailored to your farm's unique conditions",
    soilType: "ЁЯМН Soil Type",
    moisture: "ЁЯТз Moisture Level",
    phRange: "ЁЯзк pH Range",
    season: "тШАя╕П Season",
    pests: "ЁЯРЫ Common Pests",
    calculate: "тЬи Get Recommendations",
    reset: "ЁЯФД Reset",
    recommendations: "ЁЯМЯ Recommended Crops",
    revenue: "ЁЯТ░ Revenue per Acre",
    duration: "тП│ Duration",
    tips: "ЁЯТб Expert Tips",
    soilTypes: {
      clay: "Clay ЁЯП║",
      loam: "Loam ЁЯМ▒",
      sandy: "Sandy ЁЯПЦя╕П",
      silt: "Silt ЁЯМК",
      alluvial: "Alluvial ЁЯМК",
      black: "Black ЁЯЦд",
      red: "Red ЁЯФ┤"
    },
    moistureLevels: {
      low: "Low ЁЯПЬя╕П",
      medium: "Medium ЁЯТж",
      high: "High ЁЯМК"
    },
    phRanges: {
      acidic: "Acidic ЁЯНЛ (below 6.5)",
      neutral: "Neutral тЪЦя╕П (6.5-7.5)",
      alkaline: "Alkaline ЁЯз╝ (above 7.5)",
      slightlyAcidic: "Slightly Acidic (6.0-6.5)",
      slightlyAlkaline: "Slightly Alkaline (7.5-8.0)"
    },
    seasons: {
      kharif: "Kharif ЁЯМзя╕П (Monsoon)",
      rabi: "Rabi тЭДя╕П (Winter)",
      zaid: "Zaid тШАя╕П (Summer)",
      yearRound: "Year-round ЁЯУЕ"
    },
    pestsList: {
      none: "None тЬЕ",
      aphids: "Aphids ЁЯРЬ",
      bollworm: "Bollworm ЁЯРЫ",
      stemBorer: "Stem Borer ЁЯк▒",
      whitefly: "Whitefly ЁЯжЯ",
      termites: "Termites ЁЯРЬ",
      fruitBorer: "Fruit Borer ЁЯНП",
      shootFly: "Shoot Fly ЁЯк░",
      armyWorm: "Army Worm ЁЯРЫ",
      thrips: "Thrips ЁЯжЧ",
      blowworm: "Blow Worm ЁЯРЫ"
    }
  },
  te: {
    // Telugu translations...
  },
  hi: {
    // Hindi translations...
  }
};

// Complete crop data with all plants
const cropData = [
  // Crops with pests: none
  {
    name: { en: "Barley ЁЯМ╛", te: "р░пр░╡р░▓р▒Б ЁЯМ╛", hi: "рдЬреМ ЁЯМ╛" },
    soilTypes: ["clay", "loam"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["rabi"],
    pests: ["none"],
    revenue: { en: "тВ╣35,000 - тВ╣55,000", te: "тВ╣35,000 - тВ╣55,000", hi: "тВ╣35,000 - тВ╣55,000" },
    duration: { en: "100-120 days", te: "100-120 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "100-120 рджрд┐рди" },
    tips: {
      en: ["Avoid waterlogging", "Use early maturing varieties", "Perform timely weeding"],
      te: ["р░ир▒Ар░Яр░┐ р░ир░┐р░▓р▒Нр░╡р░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐", "р░др▒Нр░╡р░░р░Чр░╛ р░кр░Вр░бр▒З р░░р░Хр░╛р░▓р░ир▒Б р░╡р░╛р░бр░Вр░бр░┐", "р░╕р░ор░пр░╛р░ир░┐р░Хр░┐ р░Хр░▓р▒Бр░кр▒Б р░др▒Ар░╕р▒Зр░пр░Вр░бр░┐"],
      hi: ["рдЬрд▓рднрд░рд╛рд╡ рд╕реЗ рдмрдЪреЗрдВ", "рдЬрд▓реНрджреА рдкрдХрдиреЗ рд╡рд╛рд▓реА рдХрд┐рд╕реНрдореЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ", "рд╕рдордп рдкрд░ рдирд┐рд░рд╛рдИ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Groundnut ЁЯеЬ", te: "р░╡р▒Зр░░р▒Бр░╕р▒Жр░ир░Ч ЁЯеЬ", hi: "рдореВрдВрдЧрдлрд▓реА ЁЯеЬ" },
    soilTypes: ["sandy", "loam"],
    moisture: "low",
    phRange: "slightlyAcidic",
    seasons: ["kharif"],
    pests: ["none"],
    revenue: { en: "тВ╣40,000 - тВ╣70,000", te: "тВ╣40,000 - тВ╣70,000", hi: "тВ╣40,000 - тВ╣70,000" },
    duration: { en: "110-130 days", te: "110-130 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "110-130 рджрд┐рди" },
    tips: {
      en: ["Avoid heavy clay soils", "Harvest when leaves turn yellow", "Dry pods properly"],
      te: ["р░нр░╛р░░р▒А р░ор░Яр▒Нр░Яр░┐р░ир░┐ р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐", "р░Жр░Хр▒Бр░▓р▒Б р░кр░╕р▒Бр░кр▒Б р░░р░Вр░Чр▒Б р░╡р░Ър▒Нр░Ър▒Зр░╕р░░р░┐р░Хр░┐ р░Хр▒Лр░пр░Вр░бр░┐", "р░Чр░┐р░Вр░Ьр░▓р░ир▒Б р░мр░╛р░Чр░╛ р░Ор░Вр░бр░мр▒Жр░Яр▒Нр░Яр░Вр░бр░┐"],
      hi: ["рднрд╛рд░реА рдорд┐рдЯреНрдЯреА рд╕реЗ рдмрдЪреЗрдВ", "рдЬрдм рдкрддреНрддрд┐рдпрд╛рдВ рдкреАрд▓реА рд╣реЛ рдЬрд╛рдПрдВ рддрдм рдХрд╛рдЯреЗрдВ", "рдлрд▓рд┐рдпреЛрдВ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реБрдЦрд╛рдПрдВ"]
    }
  },
  {
    name: { en: "Jowar ЁЯМ╛", te: "р░Ьр▒Кр░ир▒Нр░и ЁЯМ╛", hi: "рдЬреНрд╡рд╛рд░ ЁЯМ╛" },
    soilTypes: ["black", "loam"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["rabi", "kharif"],
    pests: ["none"],
    revenue: { en: "тВ╣20,000 - тВ╣35,000", te: "тВ╣20,000 - тВ╣35,000", hi: "тВ╣20,000 - тВ╣35,000" },
    duration: { en: "100-120 days", te: "100-120 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "100-120 рджрд┐рди" },
    tips: {
      en: ["Avoid waterlogging", "Intercrop with pulses", "Use organic manure"],
      te: ["р░ир▒Ар░Яр░┐ р░ир░┐р░▓р▒Нр░╡р░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐", "р░кр░кр▒Нр░кр▒Бр░жр░┐р░ир▒Бр░╕р▒Бр░▓р░др▒Л р░Ер░Вр░др░░р▒Н р░╕р░╛р░Чр▒Б р░Ър▒Зр░пр░Вр░бр░┐", "р░╕р▒Зр░Вр░жр▒Нр░░р▒Ар░п р░Ор░░р▒Бр░╡р▒Бр░▓р▒Б р░╡р░╛р░бр░Вр░бр░┐"],
      hi: ["рдЬрд▓рднрд░рд╛рд╡ рд╕реЗ рдмрдЪреЗрдВ", "рджрд▓рд╣рдиреА рдХреЗ рд╕рд╛рде рдЕрдВрддрдГ рдлрд╕рд▓ рд▓реЗрдВ", "рдЬреИрд╡рд┐рдХ рдЦрд╛рдж рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Mustard ЁЯМ┐", te: "р░Жр░╡р░╛р░▓р▒Б ЁЯМ┐", hi: "рд╕рд░рд╕реЛрдВ ЁЯМ┐" },
    soilTypes: ["alluvial", "loam"],
    moisture: "low",
    phRange: "neutral",
    seasons: ["rabi"],
    pests: ["none"],
    revenue: { en: "тВ╣45,000 - тВ╣60,000", te: "тВ╣45,000 - тВ╣60,000", hi: "тВ╣45,000 - тВ╣60,000" },
    duration: { en: "110-130 days", te: "110-130 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "110-130 рджрд┐рди" },
    tips: {
      en: ["Sow with proper spacing", "Avoid late sowing", "Control weeds timely"],
      te: ["р░др░Чр░┐р░ир░Вр░д р░жр▒Вр░░р░Вр░▓р▒Л р░╡р░┐р░др▒Нр░др░Вр░бр░┐", "р░Жр░▓р░╕р▒Нр░пр░Вр░Чр░╛ р░╡р░┐р░др▒Нр░др░Хр░Вр░бр░┐", "р░╕р░ор░пр░╛р░ир░┐р░Хр░┐ р░Хр░▓р▒Бр░кр▒Б р░др▒Ар░╕р▒Зр░пр░Вр░бр░┐"],
      hi: ["рд╕рд╣реА рджреВрд░реА рдкрд░ рдмреБрдЖрдИ рдХрд░реЗрдВ", "рджреЗрд░ рд╕реЗ рдмреБрдЖрдИ рди рдХрд░реЗрдВ", "рд╕рдордп рдкрд░ рдирд┐рд░рд╛рдИ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Sunflower ЁЯМ╗", te: "р░╕р▒Вр░░р▒Нр░пр░Хр░╛р░Вр░др░┐ ЁЯМ╗", hi: "рд╕реВрд░рдЬрдореБрдЦреА ЁЯМ╗" },
    soilTypes: ["loam", "sandy"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["rabi", "kharif"],
    pests: ["none"],
    revenue: { en: "тВ╣50,000 - тВ╣75,000", te: "тВ╣50,000 - тВ╣75,000", hi: "тВ╣50,000 - тВ╣75,000" },
    duration: { en: "90-110 days", te: "90-110 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "90-110 рджрд┐рди" },
    tips: {
      en: ["Ensure full sunlight", "Do not over-irrigate", "Use balanced fertilizers"],
      te: ["р░кр▒Вр░░р▒Нр░др░┐ р░╡р▒Жр░▓р▒Бр░др▒Бр░░р▒Бр░ир▒Б р░Зр░╡р▒Нр░╡р░Вр░бр░┐", "р░Ер░зр░┐р░Хр░Вр░Чр░╛ р░ир▒Ар░░р▒Б р░кр▒Жр░Яр▒Нр░Яр░╡р░жр▒Нр░жр▒Б", "р░╕р░ор░др▒Бр░▓р▒Нр░п р░Ор░░р▒Бр░╡р▒Бр░▓р▒Б р░╡р░╛р░бр░Вр░бр░┐"],
      hi: ["рдкреВрд░рд╛ рдзреВрдк рджреЗрдВ", "рдЕрдзрд┐рдХ рд╕рд┐рдВрдЪрд╛рдИ рди рдХрд░реЗрдВ", "рд╕рдВрддреБрд▓рд┐рдд рдЙрд░реНрд╡рд░рдХ рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Turmeric ЁЯМ┐", te: "р░кр░╕р▒Бр░кр▒Б ЁЯМ┐", hi: "рд╣рд▓реНрджреА ЁЯМ┐" },
    soilTypes: ["loam", "alluvial"],
    moisture: "high",
    phRange: "slightlyAcidic",
    seasons: ["kharif"],
    pests: ["none"],
    revenue: { en: "тВ╣80,000 - тВ╣1,20,000", te: "тВ╣80,000 - тВ╣1,20,000", hi: "тВ╣80,000 - тВ╣1,20,000" },
    duration: { en: "210-240 days", te: "210-240 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "210-240 рджрд┐рди" },
    tips: {
      en: ["Mulch after planting", "Regular irrigation needed", "Harvest after leaves dry"],
      te: ["р░ир░╛р░Яр░┐р░и р░др░░р▒Нр░╡р░╛р░д р░ор░▓р▒Нр░Ър░┐р░Вр░Чр▒Н р░Ър▒Зр░пр░Вр░бр░┐", "р░ир░┐р░пр░ор░┐р░др░Вр░Чр░╛ р░ир▒Ар░░р▒Б р░кр▒Жр░Яр▒Нр░Яр░Вр░бр░┐", "р░Жр░Хр▒Бр░▓р▒Б р░Ор░Вр░бр░┐р░и р░др░░р▒Нр░╡р░╛р░д р░Хр▒Лр░пр░Вр░бр░┐"],
      hi: ["рд░реЛрдкрдг рдХреЗ рдмрд╛рдж рдорд▓реНрдЪрд┐рдВрдЧ рдХрд░реЗрдВ", "рдирд┐рдпрдорд┐рдд рд╕рд┐рдВрдЪрд╛рдИ рдХрд░реЗрдВ", "рдкрддреНрддреЗ рд╕реВрдЦрдиреЗ рдХреЗ рдмрд╛рдж рдХрдЯрд╛рдИ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Sesame ЁЯМ▒", te: "р░ир▒Бр░╡р▒Нр░╡р▒Бр░▓р▒Б ЁЯМ▒", hi: "рддрд┐рд▓ ЁЯМ▒" },
    soilTypes: ["sandy", "red"],
    moisture: "low",
    phRange: "slightlyAcidic",
    seasons: ["kharif"],
    pests: ["none"],
    revenue: { en: "тВ╣25,000 - тВ╣45,000", te: "тВ╣25,000 - тВ╣45,000", hi: "тВ╣25,000 - тВ╣45,000" },
    duration: { en: "80-100 days", te: "80-100 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "80-100 рджрд┐рди" },
    tips: {
      en: ["Sow in well-prepared soil", "Avoid waterlogging", "Harvest on sunny days"],
      te: ["р░мр░╛р░Чр░╛ р░др░пр░╛р░░р▒Бр░Ър▒Зр░╕р░┐р░и р░ир▒Зр░▓р░▓р▒Л р░╡р░┐р░др▒Нр░др░Вр░бр░┐", "р░ир▒Ар░Яр░┐ р░ир░┐р░▓р▒Нр░╡р░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐", "р░Ор░Вр░бр░┐р░и р░░р▒Лр░Ьр▒Бр░▓р░▓р▒Л р░Хр▒Лр░пр░Вр░бр░┐"],
      hi: ["рдЕрдЪреНрдЫреА рддрд░рд╣ рддреИрдпрд╛рд░ рдорд┐рдЯреНрдЯреА рдореЗрдВ рдмреБрдЖрдИ рдХрд░реЗрдВ", "рдЬрд▓рднрд░рд╛рд╡ рд╕реЗ рдмрдЪреЗрдВ", "рдзреВрдк рд╡рд╛рд▓реЗ рджрд┐рди рдХрдЯрд╛рдИ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Coriander ЁЯМ┐", te: "р░зр░ир░┐р░пр░╛р░▓р▒Б ЁЯМ┐", hi: "рдзрдирд┐рдпрд╛ ЁЯМ┐" },
    soilTypes: ["loam", "black"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["rabi", "zaid"],
    pests: ["none"],
    revenue: { en: "тВ╣20,000 - тВ╣35,000", te: "тВ╣20,000 - тВ╣35,000", hi: "тВ╣20,000 - тВ╣35,000" },
    duration: { en: "90-100 days", te: "90-100 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "90-100 рджрд┐рди" },
    tips: {
      en: ["Sow shallowly", "Keep moist until germination", "Thin seedlings early"],
      te: ["р░Ер░др░┐ р░▓р▒Лр░др▒Бр░Чр░╛ р░╡р░┐р░др▒Нр░др░Хр░Вр░бр░┐", "р░ор▒Кр░Хр▒Нр░Хр░▓р▒Б р░кр▒Бр░Яр▒Нр░Яр▒Зр░╡р░░р░Хр▒Б р░др▒Зр░ор░ир▒Б р░Йр░Вр░Ър░Вр░бр░┐", "р░ор▒Кр░Хр▒Нр░Хр░▓р▒Б р░кр▒Жр░░р░┐р░Чр▒Зр░▓р▒Лр░кр▒Б р░др░Чр▒Нр░Чр░┐р░Вр░Ър░Вр░бр░┐"],
      hi: ["рд╣рд▓реНрдХреА рдмреБрдЖрдИ рдХрд░реЗрдВ", "рдЕрдВрдХреБрд░рдг рддрдХ рдорд┐рдЯреНрдЯреА рдирдо рд░рдЦреЗрдВ", "рдЬрд▓реНрджреА рдкреМрдзреЗ рдкрддрд▓реЗ рдХрд░реЗрдВ"]
    }
  },

  // Crops with specific pests
  {
    name: { en: "Wheat ЁЯМ╛", te: "р░Чр▒Лр░зр▒Бр░ор░▓р▒Б ЁЯМ╛", hi: "рдЧреЗрдВрд╣реВ ЁЯМ╛" },
    soilTypes: ["alluvial", "clay"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["rabi"],
    pests: ["aphids", "armyWorm"],
    revenue: { en: "тВ╣45,000 - тВ╣65,000", te: "тВ╣45,000 - тВ╣65,000", hi: "тВ╣45,000 - тВ╣65,000" },
    duration: { en: "110-130 days", te: "110-130 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "110-130 рджрд┐рди" },
    tips: {
      en: ["Sow in well-drained soil", "Use certified seeds", "Regular weed control"],
      te: ["р░мр░╛р░Чр░╛ р░ир░┐р░Хр░╕р░Ьр░╛р░░р▒З р░ир▒Зр░▓р░▓р▒Л р░╡р░┐р░др▒Нр░др░┐р░Вр░Ър░Вр░бр░┐", "р░╕р░░р▒Нр░Яр░┐р░лр▒Ир░бр▒Н р░╡р░┐р░др▒Нр░др░ир░╛р░▓р░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐", "р░ир░┐р░░р░Вр░др░░р░В р░ор▒Кр░Хр▒Нр░Хр░Ьр▒Кр░ир▒Нр░и р░ир░┐р░╡р░╛р░░р░г р░Ър▒Зр░пр░Вр░бр░┐"],
      hi: ["рдЕрдЪреНрдЫреА рдЬрд▓ рдирд┐рдХрд╛рд╕реА рд╡рд╛рд▓реА рдорд┐рдЯреНрдЯреА рдореЗрдВ рдмреЛрдПрдВ", "рдкреНрд░рдорд╛рдгрд┐рдд рдмреАрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ", "рдирд┐рдпрдорд┐рдд рдирд┐рд░рд╛рдИ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Rice ЁЯМ╛", te: "р░мр░┐р░пр▒Нр░пр░В ЁЯМ╛", hi: "рдЪрд╛рд╡рд▓ ЁЯМ╛" },
    soilTypes: ["clay", "loam"],
    moisture: "high",
    phRange: "slightlyAcidic",
    seasons: ["kharif", "rabi"],
    pests: ["stemBorer", "whitefly"],
    revenue: { en: "тВ╣60,000 - тВ╣80,000", te: "тВ╣60,000 - тВ╣80,000", hi: "тВ╣60,000 - тВ╣80,000" },
    duration: { en: "120-150 days", te: "120-150 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "120-150 рджрд┐рди" },
    tips: {
      en: ["Ensure standing water in early stages", "Timely transplanting", "Proper spacing"],
      te: ["р░ор▒Кр░жр░Яр░┐ р░жр░╢р░▓р░▓р▒Л р░ир▒Ар░░р▒Б р░ир░┐р░▓р░┐р░Ър░┐ р░Йр░Вр░бр▒Зр░▓р░╛ р░Ър▒Вр░╕р▒Бр░Хр▒Лр░Вр░бр░┐", "р░╕р░Хр░╛р░▓р░Вр░▓р▒Л р░ир░╛р░Яр░┐р░╡р▒Зр░пр░бр░В", "р░др░Чр░┐р░ир░Вр░д р░╡р░┐р░╕р▒Нр░др▒Ар░░р▒Нр░гр░В р░Йр░Вр░Ър░Вр░бр░┐"],
      hi: ["рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рдгреЛрдВ рдореЗрдВ рдкрд╛рдиреА рдЦрдбрд╝рд╛ рд░рдЦреЗрдВ", "рд╕рдордп рдкрд░ рд░реЛрдкрд╛рдИ рдХрд░реЗрдВ", "рдЙрдЪрд┐рдд рджреВрд░реА рдмрдирд╛рдП рд░рдЦреЗрдВ"]
    }
  },
  {
    name: { en: "Maize ЁЯМ╜", te: "р░ор▒Кр░Хр▒Нр░Хр░Ьр▒Кр░ир▒Нр░и ЁЯМ╜", hi: "рдордХреНрдХрд╛ ЁЯМ╜" },
    soilTypes: ["sandy", "loam"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["kharif"],
    pests: ["fruitBorer", "shootFly"],
    revenue: { en: "тВ╣40,000 - тВ╣60,000", te: "тВ╣40,000 - тВ╣60,000", hi: "тВ╣40,000 - тВ╣60,000" },
    duration: { en: "90-120 days", te: "90-120 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "90-120 рджрд┐рди" },
    tips: {
      en: ["Use nitrogen-rich fertilizer", "Control weeds early", "Monitor pest infestation"],
      te: ["р░ир▒Ир░Яр▒Нр░░р▒Лр░Ьр░ир▒Н р░Ер░зр░┐р░Хр░Вр░Чр░╛ р░Йр░Вр░бр▒З р░Ор░░р▒Бр░╡р▒Бр░▓р▒Б р░╡р░╛р░бр░Вр░бр░┐", "р░Жр░░р░Вр░нр░Вр░▓р▒Лр░ир▒З р░ор░▓р▒Нр░▓р▒Жр░▓р░ир▒Б р░ир░┐р░╡р░╛р░░р░┐р░Вр░Ър░Вр░бр░┐", "р░кр▒Бр░░р▒Бр░Чр▒Бр░▓р▒Б р░Йр░ир▒Нр░ир░╛р░пр░╛ р░Ер░ир▒Зр░жр░┐ р░Чр░ор░ир░┐р░Вр░Ър░Вр░бр░┐"],
      hi: ["рдирд╛рдЗрдЯреНрд░реЛрдЬрди рдпреБрдХреНрдд рдЙрд░реНрд╡рд░рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ", "рдЬрд▓реНрджреА рдирд┐рд░рд╛рдИ рдХрд░реЗрдВ", "рдХреАрдЯ рд╕рдВрдХреНрд░рдордг рдкрд░ рдирдЬрд░ рд░рдЦреЗрдВ"]
    }
  },
  {
    name: { en: "Cotton тШБя╕П", te: "р░кр░др▒Нр░др░┐ тШБя╕П", hi: "рдХрдкрд╛рд╕ тШБя╕П" },
    soilTypes: ["black", "clay"],
    moisture: "medium",
    phRange: "slightlyAlkaline",
    seasons: ["kharif"],
    pests: ["whitefly", "bollworm"],
    revenue: { en: "тВ╣50,000 - тВ╣90,000", te: "тВ╣50,000 - тВ╣90,000", hi: "тВ╣50,000 - тВ╣90,000" },
    duration: { en: "150-180 days", te: "150-180 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "150-180 рджрд┐рди" },
    tips: {
      en: ["Avoid water stagnation", "Timely pesticide spray", "Balanced nutrient supply"],
      te: ["р░ир▒Ар░░р▒Б р░ир░┐р░▓р░┐р░Ър▒Зр░▓р░╛ р░Хр░╛р░Хр▒Бр░Вр░бр░╛ р░Ър▒Вр░бр░Вр░бр░┐", "р░╕р░Хр░╛р░▓р░Вр░▓р▒Л р░кр▒Бр░░р▒Бр░Чр▒Бр░ор░Вр░жр▒Б р░╕р▒Нр░кр▒Нр░░р▒З р░Ър▒Зр░пр░Вр░бр░┐", "р░╕р░ор░др▒Бр░▓р▒Нр░пр░Вр░Чр░╛ р░кр▒Лр░╖р░Хр░╛р░▓р▒Б р░Ер░Вр░жр░┐р░Вр░Ър░Вр░бр░┐"],
      hi: ["рдкрд╛рдиреА рдХрд╛ рдард╣рд░рд╛рд╡ рди рд╣реЛрдиреЗ рджреЗрдВ", "рд╕рдордп рдкрд░ рдХреАрдЯрдирд╛рд╢рдХ рдЫрд┐рдбрд╝рдХрд╛рд╡ рдХрд░реЗрдВ", "рд╕рдВрддреБрд▓рд┐рдд рдкреЛрд╖рдХ рддрддреНрд╡ рдкреНрд░рджрд╛рди рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Tomato ЁЯНЕ", te: "р░Яр░ор░╛р░Яр░╛ ЁЯНЕ", hi: "рдЯрдорд╛рдЯрд░ ЁЯНЕ" },
    soilTypes: ["loam", "silt"],
    moisture: "medium",
    phRange: "slightlyAcidic",
    seasons: ["yearRound"],
    pests: ["fruitBorer", "whitefly"],
    revenue: { en: "тВ╣60,000 - тВ╣85,000", te: "тВ╣60,000 - тВ╣85,000", hi: "тВ╣60,000 - тВ╣85,000" },
    duration: { en: "90-100 days", te: "90-100 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "90-100 рджрд┐рди" },
    tips: {
      en: ["Stake plants to prevent falling", "Regular watering", "Mulching recommended"],
      te: ["р░Ър▒Жр░Яр▒Нр░▓р▒Б р░кр░бр░┐р░кр▒Лр░Хр▒Бр░Вр░бр░╛ р░╕р▒Нр░Яр▒Зр░Хр▒Н р░Ър▒Зр░пр░Вр░бр░┐", "р░ир░┐р░░р░Вр░др░░р░В р░ир▒Ар░░р▒Б р░кр▒Лр░пр░Вр░бр░┐", "р░ор░▓р▒Нр░Ър░┐р░Вр░Чр▒Н р░Ър▒Зя┐╜я┐╜р░бр░В р░ор░Вр░Ър░┐р░жр░┐"],
      hi: ["рдкреМрдзреЛрдВ рдХреЛ рд╕рд╣рд╛рд░рд╛ рджреЗрдВ", "рдирд┐рдпрдорд┐рдд рд╕рд┐рдВрдЪрд╛рдИ рдХрд░реЗрдВ", "рдорд▓реНрдЪрд┐рдВрдЧ рдХреА рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ"]
    }
  },
  {
    name: { en: "Chilli ЁЯМ╢я╕П", te: "р░ор░┐р░░р░кр░Хр░╛р░пр░▓р▒Б ЁЯМ╢я╕П", hi: "рдорд┐рд░реНрдЪ ЁЯМ╢я╕П" },
    soilTypes: ["black", "loam"],
    moisture: "low",
    phRange: "neutral",
    seasons: ["kharif", "rabi"],
    pests: ["aphids", "fruitBorer"],
    revenue: { en: "тВ╣55,000 - тВ╣90,000", te: "тВ╣55,000 - тВ╣90,000", hi: "тВ╣55,000 - тВ╣90,000" },
    duration: { en: "120-150 days", te: "120-150 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "120-150 рджрд┐рди" },
    tips: {
      en: ["Proper staking", "Drip irrigation preferred", "Avoid overcrowding"],
      te: ["р░др░Чр░┐р░и р░ор░жр▒Нр░жр░др▒Б р░Зр░╡р▒Нр░╡р░Вр░бр░┐", "р░бр▒Нр░░р░┐р░кр▒Н р░Зр░░р░┐р░Чр▒Зр░╖р░ир▒Н р░╡р░╛р░бр░Вр░бр░┐", "р░ор░░р░┐р░Вр░д р░ор▒Кр░Хр▒Нр░Хр░▓р░ир▒Б р░░р░жр▒Нр░жр▒А р░Ър▒Зр░пр░╡р░жр▒Нр░жр▒Б"],
      hi: ["рдареАрдХ рд╕реЗ рд╕рд╣рд╛рд░рд╛ рджреЗрдВ", "рдбреНрд░рд┐рдк рд╕рд┐рдВрдЪрд╛рдИ рдЙрддреНрддрдо рд╣реИ", "рднреАрдбрд╝ рд╕реЗ рдмрдЪреЗрдВ"]
    }
  },
  {
    name: { en: "Brinjal ЁЯНЖ", te: "р░╡р░Вр░Хр░╛р░п ЁЯНЖ", hi: "рдмреИрдВрдЧрди ЁЯНЖ" },
    soilTypes: ["loam", "clay"],
    moisture: "medium",
    phRange: "neutral",
    seasons: ["yearRound"],
    pests: ["fruitBorer", "whitefly"],
    revenue: { en: "тВ╣50,000 - тВ╣80,000", te: "тВ╣50,000 - тВ╣80,000", hi: "тВ╣50,000 - тВ╣80,000" },
    duration: { en: "100-120 days", te: "100-120 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "100-120 рджрд┐рди" },
    tips: {
      en: ["Use row planting", "Regular pesticide use", "Mulching advised"],
      te: ["р░╡р░░р▒Бр░╕р░▓р▒Бр░Чр░╛ р░ир░╛р░Яр░Вр░бр░┐", "р░ир░┐р░░р░Вр░др░░ р░кр▒Бр░░р▒Бр░Чр▒Бр░ор░Вр░жр▒Б р░╡р░╛р░бр░Вр░бр░┐", "р░ор░▓р▒Нр░Ър░┐р░Вр░Чр▒Н р░ор░Вр░Ър░┐р░жр░┐"],
      hi: ["рдкрдВрдХреНрддрд┐рдпреЛрдВ рдореЗрдВ рд▓рдЧрд╛рдПрдВ", "рдирд┐рдпрдорд┐рдд рдХреАрдЯрдирд╛рд╢рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ", "рдорд▓реНрдЪрд┐рдВрдЧ рдХрд░реЗрдВ"]
    }
  },
  {
    name: { en: "Onion ЁЯзЕ", te: "р░Йр░▓р▒Нр░▓р░┐р░кр░╛р░п ЁЯзЕ", hi: "рдкреНрдпрд╛рдЬрд╝ ЁЯзЕ" },
    soilTypes: ["silt", "loam"],
    moisture: "medium",
    phRange: "slightlyAlkaline",
    seasons: ["rabi", "kharif"],
    pests: ["blowworm", "thrips"],
    revenue: { en: "тВ╣60,000 - тВ╣85,000", te: "тВ╣60,000 - тВ╣85,000", hi: "тВ╣60,000 - тВ╣85,000" },
    duration: { en: "110-130 days", te: "110-130 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "110-130 рджрд┐рди" },
    tips: {
      en: ["Avoid waterlogging", "Provide full sunlight", "Dry properly before storage"],
      te: ["р░ир▒Ар░░р▒Б р░ир░┐р░▓р░┐р░Ър▒Зр░▓р░╛ р░Хр░╛р░Хр▒Бр░Вр░бр░╛ р░Ър▒Вр░бр░Вр░бр░┐", "р░кр▒Вр░░р▒Нр░др░┐ р░╕р▒Вр░░р▒Нр░пр░Хр░╛р░Вр░др░┐ р░Йр░Вр░бр▒Зр░▓р░╛ р░Ър▒Вр░бр░Вр░бр░┐", "р░Ер░ир▒Бр░╡р▒Бр░Чр░╛ р░Ор░Вр░бр░мр▒Жр░Яр▒Нр░Яр░┐ р░ир░┐р░▓р▒Нр░╡ р░Ър▒Зр░пр░Вр░бр░┐"],
      hi: ["рдкрд╛рдиреА рдХрд╛ рдЬрдорд╛рд╡ рди рд╣реЛ", "рдкреВрд░рд╛ рдзреВрдк рдорд┐рд▓реЗ", "рднрдВрдбрд╛рд░рдг рд╕реЗ рдкрд╣рд▓реЗ рдареАрдХ рд╕реЗ рд╕реБрдЦрд╛рдПрдВ"]
    }
  },
  {
    name: { en: "Sugarcane ЁЯНм", te: "р░Ър▒Жр░░р░Хр▒Б ЁЯНм", hi: "рдЧрдиреНрдирд╛ ЁЯНм" },
    soilTypes: ["clay", "alluvial"],
    moisture: "high",
    phRange: "neutral",
    seasons: ["yearRound"],
    pests: ["stemBorer", "shootFly"],
    revenue: { en: "тВ╣80,000 - тВ╣1,20,000", te: "тВ╣80,000 - тВ╣1,20,000", hi: "тВ╣80,000 - тВ╣1,20,000" },
    duration: { en: "270-365 days", te: "270-365 р░░р▒Лр░Ьр▒Бр░▓р▒Б", hi: "270-365 рджрд┐рди" },
    tips: {
      en: ["Requires abundant water", "Plant in furrows", "Timely cutting is important"],
      te: ["р░Ор░Хр▒Нр░Хр▒Бр░╡ р░ир▒Ар░░р▒Б р░Ер░╡р░╕р░░р░В", "р░ир░╛р░│р░╛р░▓р░▓р▒Л р░ир░╛р░Яр░╛р░▓р░┐", "р░╕р░Хр░╛р░▓р░Вр░▓р▒Л р░Хр▒Лр░д р░Ър▒Зр░пр░Вр░бр░┐"],
      hi: ["рдЕрдзрд┐рдХ рдкрд╛рдиреА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛", "рдирд╛рд▓рд┐рдпреЛрдВ рдореЗрдВ рд░реЛрдкрд╛рдИ рдХрд░реЗрдВ", "рд╕рдордп рдкрд░ рдХрдЯрд╛рдИ рдХрд░реЗрдВ"]
    }
  }
];

const SmartCropAdvisor = () => {
  const [language, setLanguage] = useState<'en' | 'te' | 'hi'>('en');
  const [soilType, setSoilType] = useState('');
  const [moisture, setMoisture] = useState('');
  const [phRange, setPhRange] = useState('');
  const [season, setSeason] = useState('');
  const [pests, setPests] = useState('');
  const [recommendations, setRecommendations] = useState<any[]>([]);
  const [showResults, setShowResults] = useState(false);

  const t = translations[language] || translations.en;

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    const matchedCrops = cropData.filter(crop => {
      const soilMatch = !soilType || crop.soilTypes.includes(soilType);
      const moistureMatch = !moisture || crop.moisture === moisture;
      const phMatch = !phRange || crop.phRange === phRange;
      const seasonMatch = !season || crop.seasons.includes(season);
      const pestMatch = pests === 'none' || !pests || !crop.pests.includes(pests);
      
      return soilMatch && moistureMatch && phMatch && seasonMatch && pestMatch;
    });

    setRecommendations(matchedCrops);
    setShowResults(true);
  };

  const resetForm = () => {
    setSoilType('');
    setMoisture('');
    setPhRange('');
    setSeason('');
    setPests('');
    setRecommendations([]);
    setShowResults(false);
  };

  return (
    <div className="min-h-screen bg-gradient-to-b from-green-50 to-amber-50 py-8 px-4">
      <div className="max-w-4xl mx-auto">
        <Card className="shadow-lg border-0">
          <CardHeader className="bg-green-600 rounded-t-lg">
            <div className="flex justify-between items-center">
              <div>
                <CardTitle className="text-white text-2xl font-bold">{t.title}</CardTitle>
                <CardDescription className="text-green-100">{t.description}</CardDescription>
              </div>
              <Select value={language} onValueChange={(value: 'en' | 'te' | 'hi') => setLanguage(value)}>
                <SelectTrigger className="w-[120px] bg-white/90 hover:bg-white">
                  <SelectValue placeholder="Language" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="en">English ЁЯЗмЁЯЗз</SelectItem>
                  <SelectItem value="te">р░др▒Жр░▓р▒Бр░Чр▒Б ЁЯЗоЁЯЗ│</SelectItem>
                  <SelectItem value="hi">рд╣рд┐рдВрджреА ЁЯЗоЁЯЗ│</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </CardHeader>
          
          <CardContent className="bg-white/90 p-6 rounded-b-lg">
            {!showResults ? (
              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {/* Soil Type */}
                  <div className="space-y-2">
                    <Label className="flex items-center gap-2 text-green-800 font-medium">
                      <Leaf className="h-5 w-5 text-green-600" />
                      {t.soilType}
                    </Label>
                    <Select value={soilType} onValueChange={setSoilType}>
                      <SelectTrigger className="h-12 border-green-300 hover:border-green-400 focus:ring-green-500">
                        <SelectValue placeholder="Select soil type" />
                      </SelectTrigger>
                      <SelectContent className="border-green-200">
                        {Object.entries(t.soilTypes || {}).map(([key, value]) => (
                          <SelectItem key={key} value={key} className="hover:bg-green-50">
                            {value as string}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                  </div>

                  {/* Moisture Level */}
                  <div className="space-y-2">
                    <Label className="flex items-center gap-2 text-blue-800 font-medium">
                      <Droplets className="h-5 w-5 text-blue-600" />
                      {t.moisture}
                    </Label>
                    <Select value={moisture} onValueChange={setMoisture}>
                      <SelectTrigger className="h-12 border-blue-300 hover:border-blue-400 focus:ring-blue-500">
                        <SelectValue placeholder="Select moisture level" />
                      </SelectTrigger>
                      <SelectContent className="border-blue-200">
                        {Object.entries(t.moistureLevels || {}).map(([key, value]) => (
                          <SelectItem key={key} value={key} className="hover:bg-blue-50">
                            {value as string}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                  </div>

                  {/* pH Range */}
                  <div className="space-y-2">
                    <Label className="flex items-center gap-2 text-purple-800 font-medium">
                      <BarChart2 className="h-5 w-5 text-purple-600" />
                      {t.phRange}
                    </Label>
                    <Select value={phRange} onValueChange={setPhRange}>
                      <SelectTrigger className="h-12 border-purple-300 hover:border-purple-400 focus:ring-purple-500">
                        <SelectValue placeholder="Select pH range" />
                      </SelectTrigger>
                      <SelectContent className="border-purple-200">
                        {Object.entries(t.phRanges || {}).map(([key, value]) => (
                          <SelectItem key={key} value={key} className="hover:bg-purple-50">
                            {value as string}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                  </div>

                  {/* Season */}
                  <div className="space-y-2">
                    <Label className="flex items-center gap-2 text-amber-800 font-medium">
                      <Sun className="h-5 w-5 text-amber-600" />
                      {t.season}
                    </Label>
                    <Select value={season} onValueChange={setSeason}>
                      <SelectTrigger className="h-12 border-amber-300 hover:border-amber-400 focus:ring-amber-500">
                        <SelectValue placeholder="Select season" />
                      </SelectTrigger>
                      <SelectContent className="border-amber-200">
                        {Object.entries(t.seasons || {}).map(([key, value]) => (
                          <SelectItem key={key} value={key} className="hover:bg-amber-50">
                            {value as string}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                  </div>

                  {/* Pests */}
                  <div className="space-y-2">
                    <Label className="flex items-center gap-2 text-red-800 font-medium">
                      <Bug className="h-5 w-5 text-red-600" />
                      {t.pests}
                    </Label>
                    <Select value={pests} onValueChange={setPests}>
                      <SelectTrigger className="h-12 border-red-300 hover:border-red-400 focus:ring-red-500">
                        <SelectValue placeholder="Select common pests" />
                      </SelectTrigger>
                      <SelectContent className="border-red-200">
                        {Object.entries(t.pestsList || {}).map(([key, value]) => (
                          <SelectItem key={key} value={key} className="hover:bg-red-50">
                            {value as string}
                          </SelectItem>
                        ))}
                      </SelectContent>
                    </Select>
                  </div>
                </div>

                <div className="flex justify-center pt-4">
                  <Button 
                    type="submit" 
                    className="bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 transform hover:scale-105"
                  >
                    <span className="flex items-center gap-2">
                      <Sprout className="h-5 w-5" />
                      {t.calculate}
                    </span>
                  </Button>
                </div>
              </form>
            ) : (
              <div className="space-y-8">
                <div className="flex justify-between items-center pb-4 border-b border-green-200">
                  <h3 className="text-2xl font-bold text-green-800 flex items-center gap-2">
                    <Sprout className="h-6 w-6 text-green-600" />
                    {t.recommendations}
                  </h3>
                  <Button 
                    variant="outline" 
                    onClick={resetForm}
                    className="border-green-400 text-green-700 hover:bg-green-50 hover:text-green-800"
                  >
                    <span className="flex items-center gap-2">
                      <Shield className="h-4 w-4" />
                      {t.reset}
                    </span>
                  </Button>
                </div>

                {recommendations.length > 0 ? (
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {recommendations.map((crop, index) => (
                      <Card key={index} className="hover:shadow-md transition-shadow duration-300 border-green-100">
                        <CardHeader className="bg-green-50 rounded-t-lg border-b border-green-200">
                          <CardTitle className="text-xl font-bold text-green-800">
                            {crop.name[language]}
                          </CardTitle>
                        </CardHeader>
                        <CardContent className="p-6 space-y-4">
                          <div className="bg-green-50 p-4 rounded-lg">
                            <p className="font-semibold text-green-700 flex items-center gap-2">
                              <TrendingUp className="h-5 w-5" />
                              {t.revenue}:
                            </p>
                            <p className="text-green-900 pl-7">{crop.revenue[language]}</p>
                          </div>
                          
                          <div className="bg-amber-50 p-4 rounded-lg">
                            <p className="font-semibold text-amber-700 flex items-center gap-2">
                              <Clock className="h-5 w-5" />
                              {t.duration}:
                            </p>
                            <p className="text-amber-900 pl-7">{crop.duration[language]}</p>
                          </div>
                          
                          <div className="bg-blue-50 p-4 rounded-lg">
                            <p className="font-semibold text-blue-700 flex items-center gap-2">
                              <Calendar className="h-5 w-5" />
                              {t.tips}:
                            </p>
                            <ul className="space-y-2 pl-7">
                              {(crop.tips[language] || []).map((tip: string, i: number) => (
                                <li key={i} className="flex items-start gap-2">
                                  <span className="text-blue-500">тАв</span>
                                  <span className="text-blue-900">{tip}</span>
                                </li>
                              ))}
                            </ul>
                          </div>
                        </CardContent>
                      </Card>
                    ))}
                  </div>
                ) : (
                  <div className="text-center py-8 bg-yellow-50 rounded-lg border border-yellow-200">
                    <div className="flex flex-col items-center justify-center space-y-3">
                      <span className="text-5xl">ЁЯМ╡</span>
                      <p className="text-yellow-800 font-medium max-w-md">
                        {language === 'en' ? "No perfect matches found. Try adjusting your parameters!" : 
                         "рдХреЛрдИ рд╕рдЯреАрдХ рдорд┐рд▓рд╛рди рдирд╣реАрдВ рдорд┐рд▓рд╛ред рдЕрдкрдиреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░реЗрдВ!"}
                      </p>
                      <Button 
                        onClick={resetForm}
                        className="mt-4 bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-white"
                      >
                        {t.reset}
                      </Button>
                    </div>
                  </div>
                )}
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default SmartCropAdvisor;
